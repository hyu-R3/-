# 图书馆管理系统测试用例

## 1. 用户注册测试

### TC-001: 正常注册
**前置条件**: 无
**测试步骤**:
1. 访问系统首页
2. 点击"注册"标签
3. 输入用户名: testuser
4. 输入密码: Test@123
5. 输入姓名: 测试用户
6. 输入邮箱: test@example.com
7. 输入电话: 13800138000
8. 点击"注册"按钮

**预期结果**: 
- 显示"注册成功，请登录"提示
- 自动切换到登录标签
- 注册表单被清空

---

### TC-002: 用户名已存在
**前置条件**: 已存在用户名 testuser
**测试步骤**:
1. 访问系统首页
2. 点击"注册"标签
3. 输入用户名: testuser（已存在）
4. 输入密码: Test@123
5. 输入姓名: 测试用户2
6. 点击"注册"按钮

**预期结果**: 
- 显示"用户名已存在"错误提示

---

### TC-003: 必填项验证
**前置条件**: 无
**测试步骤**:
1. 访问系统首页
2. 点击"注册"标签
3. 只填写用户名，不填写密码和姓名
4. 点击"注册"按钮

**预期结果**: 
- 浏览器提示"用户名、密码和姓名不能为空"
- 注册失败

---

## 2. 用户登录测试

### TC-004: 正常登录
**前置条件**: 已存在用户 testuser，密码 Test@123
**测试步骤**:
1. 访问系统首页
2. 输入用户名: testuser
3. 输入密码: Test@123
4. 点击"登录"按钮

**预期结果**: 
- 显示"登录成功"提示
- 登录页面隐藏，主页面显示
- 顶部显示"欢迎, 测试用户"
- 自动加载图书列表

---

### TC-005: 用户名错误
**前置条件**: 无
**测试步骤**:
1. 访问系统首页
2. 输入用户名: wronguser
3. 输入密码: Test@123
4. 点击"登录"按钮

**预期结果**: 
- 显示"用户名或密码错误"提示
- 登录失败

---

### TC-006: 密码错误
**前置条件**: 已存在用户 testuser，密码 Test@123
**测试步骤**:
1. 访问系统首页
2. 输入用户名: testuser
3. 输入密码: wrongpassword
4. 点击"登录"按钮

**预期结果**: 
- 显示"用户名或密码错误"提示
- 登录失败

---

### TC-007: 空值登录
**前置条件**: 无
**测试步骤**:
1. 访问系统首页
2. 不输入用户名和密码
3. 点击"登录"按钮

**预期结果**: 
- 浏览器提示"用户名和密码不能为空"
- 登录失败

---

## 3. 图书入库测试

### TC-008: 正常入库
**前置条件**: 已登录
**测试步骤**:
1. 点击"图书入库"按钮
2. 输入ISBN: 9787111111111
3. 输入书名: JavaScript高级程序设计
4. 输入作者: Nicholas C. Zakas
5. 输入出版社: 人民邮电出版社
6. 输入出版日期: 2020-01-01
7. 输入分类: 编程
8. 输入数量: 5
9. 输入价格: 99.00
10. 输入简介: JavaScript经典教程
11. 点击"确认入库"按钮

**预期结果**: 
- 显示"图书入库成功"提示
- 模态框关闭
- 表单清空
- 图书列表中显示新入库的图书

---

### TC-009: ISBN重复
**前置条件**: 已存在ISBN 9787111111111的图书
**测试步骤**:
1. 点击"图书入库"按钮
2. 输入ISBN: 9787111111111（已存在）
3. 输入书名: 其他书名
4. 输入作者: 其他作者
5. 输入数量: 3
6. 点击"确认入库"按钮

**预期结果**: 
- 显示"ISBN已存在"错误提示
- 入库失败

---

### TC-010: 必填项验证
**前置条件**: 已登录
**测试步骤**:
1. 点击"图书入库"按钮
2. 只填写书名，不填写ISBN、作者和数量
3. 点击"确认入库"按钮

**预期结果**: 
- 浏览器提示必填项不能为空
- 入库失败

---

## 4. 图书查询测试

### TC-011: 按书名搜索
**前置条件**: 已存在图书"JavaScript高级程序设计"
**测试步骤**:
1. 在搜索框输入: JavaScript
2. 点击"搜索"按钮

**预期结果**: 
- 显示包含"JavaScript"的图书列表
- 显示搜索结果数量

---

### TC-012: 按作者搜索
**前置条件**: 已存在作者"Nicholas C. Zakas"的图书
**测试步骤**:
1. 在搜索框输入: Nicholas
2. 点击"搜索"按钮

**预期结果**: 
- 显示该作者的图书列表

---

### TC-013: 按ISBN搜索
**前置条件**: 已存在ISBN 9787111111111的图书
**测试步骤**:
1. 在搜索框输入: 9787111111111
2. 点击"搜索"按钮

**预期结果**: 
- 显示该ISBN的图书

---

### TC-014: 空搜索结果
**前置条件**: 无
**测试步骤**:
1. 在搜索框输入: 不存在的书名xyz123
2. 点击"搜索"按钮

**预期结果**: 
- 显示"暂无图书"提示

---

### TC-015: 回车搜索
**前置条件**: 已登录
**测试步骤**:
1. 在搜索框输入: JavaScript
2. 按回车键

**预期结果**: 
- 执行搜索并显示结果

---

## 5. 图书借阅测试

### TC-016: 正常借阅
**前置条件**: 
- 已登录
- 存在可借图书（available_quantity > 0）
**测试步骤**:
1. 在图书列表中找到可借图书
2. 点击"借阅"按钮

**预期结果**: 
- 显示"借阅成功"提示
- 图书的available_quantity减1
- 图书状态变为"已借完"（如果数量为0）
- 我的借阅中增加该记录

---

### TC-017: 重复借阅同一本书
**前置条件**: 
- 已登录
- 用户已借阅某本书且未归还
**测试步骤**:
1. 尝试再次借阅同一本书
2. 点击"借阅"按钮

**预期结果**: 
- 显示"您已借阅该书，请先归还"错误提示
- 借阅失败

---

### TC-018: 借阅已借完的图书
**前置条件**: 
- 已登录
- 图书available_quantity = 0
**测试步骤**:
1. 找到显示"已借完"的图书
2. 该图书的"借阅"按钮应为禁用状态

**预期结果**: 
- "借阅"按钮显示为灰色禁用状态
- 点击无反应

---

### TC-019: 未登录借阅
**前置条件**: 未登录
**测试步骤**:
1. 尝试点击"借阅"按钮

**预期结果**: 
- 显示"请先登录"提示
- 借阅失败

---

## 6. 图书归还测试

### TC-020: 正常归还
**前置条件**: 
- 已登录
- 用户有借阅中（status = 'borrowed'）的图书
**测试步骤**:
1. 点击"我的借阅"
2. 找到状态为"借阅中"的记录
3. 点击"归还"按钮
4. 在确认对话框中点击"确定"

**预期结果**: 
- 显示"归还成功"提示
- 借阅记录状态变为"已归还"
- 图书的available_quantity加1
- "归还"按钮变为"已归还"文字

---

### TC-021: 取消归还
**前置条件**: 
- 已登录
- 用户有借阅中的图书
**测试步骤**:
1. 点击"我的借阅"
2. 找到借阅中记录
3. 点击"归还"按钮
4. 在确认对话框中点击"取消"

**预期结果**: 
- 对话框关闭
- 借阅记录状态不变

---

### TC-022: 归还已归还的图书
**前置条件**: 
- 已登录
- 用户有已归还（status = 'returned'）的图书
**测试步骤**:
1. 点击"我的借阅"
2. 找到状态为"已归还"的记录

**预期结果**: 
- 不显示"归还"按钮
- 显示"已归还"文字

---

## 7. 借阅记录查询测试

### TC-023: 查看借阅记录
**前置条件**: 
- 已登录
- 用户有借阅记录
**测试步骤**:
1. 点击"我的借阅"

**预期结果**: 
- 显示借阅记录列表
- 每条记录显示：书名、作者、借阅日期、应还日期、状态、操作按钮

---

### TC-024: 空借阅记录
**前置条件**: 
- 已登录
- 用户无借阅记录
**测试步骤**:
1. 点击"我的借阅"

**预期结果**: 
- 显示"暂无借阅记录"提示

---

### TC-025: 借阅记录分页
**前置条件**: 
- 已登录
- 用户有超过10条借阅记录
**测试步骤**:
1. 点击"我的借阅"
2. 点击"下一页"按钮

**预期结果**: 
- 显示下一页的借阅记录
- 分页器正确显示当前页码

---

## 8. 借阅排行榜测试

### TC-026: 查看排行榜
**前置条件**: 
- 已登录
- 系统有借阅记录
**测试步骤**:
1. 点击"借阅排行榜"

**预期结果**: 
- 显示热门图书排行榜
- 每本书显示：排名、书名、作者、借阅次数
- 前三名显示金银铜色排名标记

---

### TC-027: 空排行榜
**前置条件**: 
- 已登录
- 系统无借阅记录
**测试步骤**:
1. 点击"借阅排行榜"

**预期结果**: 
- 显示"暂无数据"提示

---

### TC-028: 排序正确性
**前置条件**: 
- 已登录
- 系统有多本图书，借阅次数不同
**测试步骤**:
1. 点击"借阅排行榜"

**预期结果**: 
- 图书按借阅次数从高到低排序
- 借阅次数相同的按入库时间排序

---

## 9. 分页功能测试

### TC-029: 图书列表分页
**前置条件**: 
- 已登录
- 系统有超过10本图书
**测试步骤**:
1. 查看图书列表
2. 点击"下一页"按钮
3. 点击"上一页"按钮
4. 点击页码按钮

**预期结果**: 
- 正确切换页面
- 每页显示10本图书
- 分页器正确显示当前页码和总页数

---

### TC-030: 搜索结果分页
**前置条件**: 
- 已登录
- 搜索结果超过10条
**测试步骤**:
1. 搜索某关键词
2. 点击"下一页"按钮

**预期结果**: 
- 显示搜索结果的下一页
- 分页器正确显示

---

## 10. 退出登录测试

### TC-031: 正常退出
**前置条件**: 已登录
**测试步骤**:
1. 点击右上角"退出"按钮

**预期结果**: 
- 显示"已退出登录"提示
- 主页面隐藏
- 登录页面显示
- 登录表单被清空
- currentUser被清空

---

## 11. 性能测试

### TC-032: 响应时间测试
**前置条件**: 系统正常运行
**测试步骤**:
1. 执行各种操作（登录、搜索、借阅、归还）
2. 测量每个操作的响应时间

**预期结果**: 
- 所有操作响应时间 < 1.5秒
- 数据库查询优化有效

---

### TC-033: 大数据量测试
**前置条件**: 系统有大量图书和借阅记录
**测试步骤**:
1. 执行搜索操作
2. 查看排行榜
3. 查看借阅记录

**预期结果**: 
- 分页功能正常
- 响应时间仍在1.5秒内

---

## 12. 安全性测试

### TC-034: 密码加密存储
**前置条件**: 已注册用户
**测试步骤**:
1. 检查数据库readers表中的password字段

**预期结果**: 
- 密码以bcrypt加密后的哈希值存储
- 不是明文密码

---

### TC-035: SQL注入防护
**前置条件**: 已登录
**测试步骤**:
1. 在搜索框输入SQL注入语句: "'; DROP TABLE books; --"
2. 点击搜索

**预期结果**: 
- 系统正常处理
- 不会执行恶意SQL语句
- 数据表不会被删除

---

## 13. 并发测试

### TC-036: 同时借阅同一本书
**前置条件**: 
- 图书available_quantity = 1
- 两个不同用户同时借阅
**测试步骤**:
1. 用户A点击借阅
2. 用户B同时点击借阅

**预期结果**: 
- 只有一个用户借阅成功
- 另一个用户收到"图书已借完"提示
- 数据库一致性得到保证

---

## 14. 边界值测试

### TC-037: 图书数量边界
**前置条件**: 已登录
**测试步骤**:
1. 入库时输入数量: 0
2. 入库时输入数量: 1
3. 入库时输入数量: 999

**预期结果**: 
- 数量0: 应被拒绝或特殊处理
- 数量1: 正常入库
- 数量999: 正常入库

---

### TC-038: 价格边界
**前置条件**: 已登录
**测试步骤**:
1. 入库时输入价格: 0
2. 入库时输入价格: 0.01
3. 入库时输入价格: 999999.99

**预期结果**: 
- 所有边界值都能正常处理

---

## 15. 兼容性测试

### TC-039: 浏览器兼容性
**前置条件**: 系统正常运行
**测试步骤**:
1. 在Chrome浏览器中测试
2. 在Firefox浏览器中测试
3. 在Edge浏览器中测试

**预期结果**: 
- 所有浏览器都能正常访问和使用
- 界面显示正常
- 功能正常工作

---

### TC-040: 响应式布局
**前置条件**: 系统正常运行
**测试步骤**:
1. 在桌面浏览器中访问
2. 调整浏览器窗口大小
3. 在移动设备中访问

**预期结果**: 
- 界面自适应不同屏幕尺寸
- 移动端布局正常
- 触摸操作流畅

---

## 测试环境

- 操作系统: Windows 10/11
- Node.js版本: v24.12.0
- 浏览器: Chrome, Firefox, Edge
- 数据库: SQLite3

## 测试数据准备

建议准备以下测试数据：

1. **测试用户**:
   - 用户名: testuser, 密码: Test@123
   - 用户名: admin, 密码: Admin@123

2. **测试图书**:
   - JavaScript高级程序设计 (ISBN: 9787111111111)
   - Python编程从入门到实践 (ISBN: 9787111111112)
   - 深入理解计算机系统 (ISBN: 9787111111113)
   - 算法导论 (ISBN: 9787111111114)
   - 设计模式 (ISBN: 9787111111115)

3. **测试场景**:
   - 准备15本以上图书以测试分页
   - 准备多个用户和借阅记录以测试排行榜